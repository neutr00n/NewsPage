{"mappings":"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","sources":["src/js/search/storage-search.js","src/js/favorites/index.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nimport { searchForm, readNewsDateContainer, notFound } from '../refs/index';\nimport { getStorage } from '../local-storage/index';\nimport { markUpPage } from '../markup/index';\nimport { auditArrayNews } from '../favorites/index'; //\n\nconst pageByBody = document.body.dataset.set;\n\nsearchForm.addEventListener('submit', handleSubmitSearchForm);\n\nfunction handleSubmitSearchForm(event) {\n  event.preventDefault();\n\n  const searchingNews = event.target.search.value.trim().toLowerCase();\n\n  if (!searchingNews) {\n    return makeInfoMessage('What would you like to find?');\n  }\n\n  searchFromCurrentPage(searchingNews);\n\n  event.currentTarget.reset();\n}\n\nfunction searchFromCurrentPage(searchingNews) {\n  let storageKey = '';\n\n  if (pageByBody === 'favorite') {\n    storageKey = 'ID-SAVE-FAVORITE';\n\n    const listNews = document.querySelector('.list-news');\n    listNews.innerHTML = '';\n\n    const newsArr = getStorage(storageKey);\n\n    const desiredNews = newsArr.filter(news =>\n      news.title.toLowerCase().includes(searchingNews)\n    );\n\n    showNothingNotFound(desiredNews);\n    appendArticleMarkup(desiredNews, listNews);\n    auditArrayNews();\n  }\n\n  if (pageByBody === 'read') {\n    readNewsDateContainer.innerHTML = '';\n    storageKey = 'readNews';\n\n    const listNews = document.querySelector('.read-list-news');\n\n    const newsArr = getStorage(storageKey);\n\n    const desiredNews = newsArr.filter(news =>\n      news.title.toLowerCase().includes(searchingNews)\n    );\n\n    showNothingNotFound(desiredNews);\n    appendArticleMarkup(desiredNews, listNews);\n  }\n}\n\nfunction appendArticleMarkup(desiredNews, container) {\n  const cardSet = desiredNews\n    .map(({ photo, title, abstract, date, url, category, id, idLenght }) =>\n      markUpPage(photo, title, abstract, date, url, category, id, idLenght)\n    )\n    .join('');\n\n  container.innerHTML = cardSet;\n}\n\nfunction showNothingNotFound(arr) {\n  notFound.classList.add('not-found-hidden');\n\n  if (arr.length === 0) {\n    notFound.classList.remove('not-found-hidden');\n  }\n}\n\nfunction makeInfoMessage(message) {\n  Notify.info(message);\n}\n","import { markUpPage } from '../markup/index';\n// const favoritesEL = document.querySelector('.favorits-list');\nconst listNews = document.querySelector('.list-news');\n\nconst LOCALSTORAGE_KEY = 'ID-SAVE-FAVORITE';\nlet idArray = localStorage.getItem('ID-SAVE-FAVORITE');\nlet idArrayPars = JSON.parse(idArray) || [];\n\nlistNews.addEventListener('change', deletNewsFavorite);\ncreatFavoritesList(idArrayPars);\nauditArrayNews();\n\nfunction creatFavoritesList(arr) {\n  let array = arr\n    .map(\n      ({\n        url,\n        media,\n        title,\n        abstract,\n        date,\n        photo,\n        id,\n        idLenght,\n        category,\n      }) => {\n        console.log(title);\n        return markUpPage(\n          photo,\n          title,\n          abstract,\n          date,\n          url,\n          category,\n          id,\n          idLenght\n        );\n      }\n    )\n    .join('');\n  listNews.insertAdjacentHTML('beforeend', array);\n}\n\nfunction deletNewsFavorite(e) {\n  if (!e.target.classList.contains('button')) {\n    return;\n  } else if (e.target.classList.contains('add')) {\n    const findIndex = +idArrayPars.findIndex(\n      el => el.idLenght === +e.target.attributes[2].value\n    );\n    console.log(e.target.attributes[2].value);\n    idArrayPars.splice(findIndex, 1);\n\n    localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(idArrayPars));\n\n    e.target.parentNode.parentNode.parentNode.remove();\n  }\n}\n\nexport function auditArrayNews() {\n  idArrayPars.map(el => {\n    listNews.querySelectorAll('.set').forEach(element => {\n      let id = element.dataset.id;\n\n      if (id === el.id) {\n        element\n          .querySelector('.js-button_favorites')\n          .setAttribute('checked', 'true');\n        element.querySelector('.js-button_favorites').classList.add('add');\n        element.querySelector('svg').classList.add('add');\n\n        element.querySelector('lable').innerHTML = 'RemoveFromFavorite';\n      }\n    });\n  });\n}\n\nexport function buttonClass() {\n  let but = document.querySelectorAll('.js-button_favorites');\n  let label = document.querySelectorAll('lable');\n\n  but.forEach(el => {\n    el.setAttribute('checked', 'true');\n    el.classList.add('add');\n  });\n\n  label.forEach(el => {\n    el.innerHTML = 'RemoveFromFavorite';\n  });\n}\n"],"names":["$h6c0i","parcelRequire","$7fbd820d8969527c$var$pageByBody","document","body","dataset","set","$7fbd820d8969527c$var$appendArticleMarkup","desiredNews","container","cardSet","map","param","photo","title","abstract","date","url","category","id","idLenght","$aDyNI","markUpPage","join","innerHTML","$7fbd820d8969527c$var$showNothingNotFound","arr","$7rHhr","notFound","classList","add","length","remove","searchForm","addEventListener","event","preventDefault","searchingNews","target","search","value","trim","toLowerCase","message","Notify","info","storageKey","listNews","querySelector","$bpWze","getStorage","filter","news","includes","$avnjS","auditArrayNews","readNewsDateContainer","listNews1","desiredNews1","$7fbd820d8969527c$var$searchFromCurrentPage","currentTarget","reset","array","$7a5ee36cdaf045b9$var$listNews","$7a5ee36cdaf045b9$var$idArray","localStorage","getItem","$7a5ee36cdaf045b9$var$idArrayPars","JSON","parse","$7a5ee36cdaf045b9$export$c0c869611b1be208","el","querySelectorAll","forEach","element","setAttribute","e","contains","findIndex","attributes","console","log","splice","setItem","stringify","parentNode","media","insertAdjacentHTML"],"version":3,"file":"read.e67158d2.js.map"}