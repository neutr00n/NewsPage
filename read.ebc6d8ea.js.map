{"mappings":"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","sources":["src/js/search/storage-search.js","src/js/favorites/index.js"],"sourcesContent":["import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nimport { searchForm, readNewsDateContainer, notFound } from '../refs/index';\nimport { getStorage } from '../local-storage/index';\nimport { markUpPage } from '../markup/index';\nimport { auditArrayNews } from '../favorites/index'; //\n\nconst pageByBody = document.body.dataset.set;\n\nsearchForm.addEventListener('submit', handleSubmitSearchForm);\n\nfunction handleSubmitSearchForm(event) {\n  event.preventDefault();\n\n  const searchingNews = event.target.search.value.trim().toLowerCase();\n\n  if (!searchingNews) {\n    return makeInfoMessage('What would you like to find?');\n  }\n\n  searchFromCurrentPage(searchingNews);\n\n  event.currentTarget.reset();\n}\n\nfunction searchFromCurrentPage(searchingNews) {\n  let storageKey = '';\n\n  if (pageByBody === 'favorite') {\n    storageKey = 'ID-SAVE-FAVORITE';\n\n    const listNews = document.querySelector('.list-news');\n    listNews.innerHTML = '';\n\n    const newsArr = getStorage(storageKey);\n\n    const desiredNews = newsArr.filter(news =>\n      news.title.toLowerCase().includes(searchingNews)\n    );\n\n    showNothingNotFound(desiredNews);\n    appendArticleMarkup(desiredNews, listNews);\n    auditArrayNews();\n  }\n\n  if (pageByBody === 'read') {\n    readNewsDateContainer.innerHTML = '';\n    storageKey = 'readNews';\n\n    const listNews = document.querySelector('.read-list-news');\n\n    const newsArr = getStorage(storageKey);\n\n    const desiredNews = newsArr.filter(news =>\n      news.title.toLowerCase().includes(searchingNews)\n    );\n\n    showNothingNotFound(desiredNews);\n    appendArticleMarkup(desiredNews, listNews);\n  }\n}\n\nfunction appendArticleMarkup(desiredNews, container) {\n  const cardSet = desiredNews\n    .map(({ photo, title, abstract, date, url, category, id, idLenght }) =>\n      markUpPage(photo, title, abstract, date, url, category, id, idLenght)\n    )\n    .join('');\n\n  container.innerHTML = cardSet;\n}\n\nfunction showNothingNotFound(arr) {\n  notFound.classList.add('not-found-hidden');\n\n  if (arr.length === 0) {\n    notFound.classList.remove('not-found-hidden');\n  }\n}\n\nfunction makeInfoMessage(message) {\n  Notify.info(message);\n}\n","import { markUpPage } from '../markup/index';\n// const favoritesEL = document.querySelector('.favorits-list');\nconst listNews = document.querySelector('.list-news');\n\nconst LOCALSTORAGE_KEY = 'ID-SAVE-FAVORITE';\nlet idArray = localStorage.getItem('ID-SAVE-FAVORITE');\nlet idArrayPars = JSON.parse(idArray) || [];\n\nlistNews.addEventListener('change', deletNewsFavorite);\ncreatFavoritesList(idArrayPars);\nauditArrayNews();\n\nfunction creatFavoritesList(arr) {\n  let array = arr\n    .map(\n      ({\n        url,\n        media,\n        title,\n        abstract,\n        date,\n        photo,\n        id,\n        idLenght,\n        category,\n      }) => {\n        console.log(title);\n        return markUpPage(\n          photo,\n          title,\n          abstract,\n          date,\n          url,\n          category,\n          id,\n          idLenght\n        );\n      }\n    )\n    .join('');\n  listNews.insertAdjacentHTML('beforeend', array);\n}\n\nfunction deletNewsFavorite(e) {\n  if (!e.target.classList.contains('button')) {\n    return;\n  } else if (e.target.classList.contains('add')) {\n    const findIndex = +idArrayPars.findIndex(\n      el => el.idLenght === +e.target.attributes[2].value\n    );\n    console.log(e.target.attributes[2].value);\n    idArrayPars.splice(findIndex, 1);\n\n    localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(idArrayPars));\n\n    e.target.parentNode.parentNode.parentNode.remove();\n  }\n}\n\nexport function auditArrayNews() {\n  idArrayPars.map(el => {\n    listNews.querySelectorAll('.set').forEach(element => {\n      let id = element.dataset.id;\n\n      if (id === el.id) {\n        element\n          .querySelector('.js-button_favorites')\n          .setAttribute('checked', 'true');\n        element.querySelector('.js-button_favorites').classList.add('add');\n        element.querySelector('svg').classList.add('add');\n\n        element.querySelector('lable').innerHTML = 'RemoveFromFavorite';\n      }\n    });\n  });\n}\n\nexport function buttonClass() {\n  let but = document.querySelectorAll('.js-button_favorites');\n  let label = document.querySelectorAll('lable');\n\n  but.forEach(el => {\n    el.setAttribute('checked', 'true');\n    el.classList.add('add');\n  });\n\n  label.forEach(el => {\n    el.innerHTML = 'RemoveFromFavorite';\n  });\n}\n"],"names":["$iQIUW","parcelRequire","$633ff686fa8929c9$var$pageByBody","document","body","dataset","set","$633ff686fa8929c9$var$appendArticleMarkup","desiredNews","container","cardSet","map","photo","title","abstract","date","url","category","id","idLenght","$6eyJa","markUpPage","join","innerHTML","$633ff686fa8929c9$var$showNothingNotFound","arr","$icTnc","notFound","classList","add","length","remove","searchForm","addEventListener","event","preventDefault","searchingNews","target","search","value","trim","toLowerCase","message","Notify","info","storageKey","listNews","querySelector","$eLqhd","getStorage","filter","news","includes","$86NrS","auditArrayNews","readNewsDateContainer","$633ff686fa8929c9$var$searchFromCurrentPage","currentTarget","reset","$5e753db6f7d9467d$var$listNews","$5e753db6f7d9467d$var$idArray","localStorage","getItem","$5e753db6f7d9467d$var$idArrayPars","JSON","parse","$5e753db6f7d9467d$export$c0c869611b1be208","el","querySelectorAll","forEach","element","setAttribute","e","contains","findIndex","attributes","console","log","splice","setItem","stringify","parentNode","array","media","insertAdjacentHTML","$5e753db6f7d9467d$var$creatFavoritesList"],"version":3,"file":"read.ebc6d8ea.js.map"}