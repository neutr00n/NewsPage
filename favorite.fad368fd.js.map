{"mappings":"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","sources":["src/favorite.js","src/js/favorites/index.js","src/js/read/feature.js","src/js/search/favorites-search.js"],"sourcesContent":["import './js/mobile-menu';\nimport './js/dark_theme';\n\nimport './js/favorites';\nimport './js/search/favorites-search';\n\nimport './js/footer-modal';\n","import {\n  checkStorageReadNews,\n  getNewsToLocalStorage,\n  makeOpacityReadedNews,\n} from '../read/feature';\nimport { getStorage } from '../local-storage';\n\nlet arrayOfReadNews = [];\ngetStorage('readNews')\n  ? (arrayOfReadNews = [...getStorage('readNews')])\n  : (arrayOfReadNews = []);\n\nimport { markUpPage } from '../markup/index';\nimport { notFound } from '../refs/index';\n// const favoritesEL = document.querySelector('.favorits-list');\nconst listNews = document.querySelector('.list-news');\n\nconst LOCALSTORAGE_KEY = 'ID-SAVE-FAVORITE';\nlet idArray = localStorage.getItem('ID-SAVE-FAVORITE');\nlet idArrayPars = JSON.parse(idArray) || [];\n\n// listNews.addEventListener('change', deletNewsFavorite);\nlistNews.addEventListener('click', e => {\n  deletNewsFavorite(e);\n  getNewsToLocalStorage(e, arrayOfReadNews);\n});\n\ncreatFavoritesList(idArrayPars);\n\nmakeOpacityReadedNews(auditArrayNews);\n\nfunction creatFavoritesList(arr) {\n  if (!idArrayPars.length) {\n    notFound.classList.remove('not-found-hidden');\n  } else {\n    let array = arr\n      .map(\n        ({\n          url,\n          media,\n          title,\n          abstract,\n          date,\n          photo,\n          id,\n          idLenght,\n          category,\n        }) => {\n          return markUpPage(\n            photo,\n            title,\n            abstract,\n            date,\n            url,\n            category,\n            id,\n            idLenght\n          );\n        }\n      )\n      .join('');\n    listNews.insertAdjacentHTML('beforeend', array);\n  }\n}\n\nfunction deletNewsFavorite(e) {\n  if (!e.target.classList.contains('button')) {\n    return;\n  } else if (e.target.classList.contains('add')) {\n    const findIndex = +idArrayPars.findIndex(\n      el => el.idLenght === +e.target.attributes[2].value\n    );\n\n    idArrayPars.splice(findIndex, 1);\n\n    localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(idArrayPars));\n\n    e.target.parentNode.parentNode.parentNode.remove();\n\n    showNothingNotFound(idArrayPars);\n  }\n  if (listNews.children.length===0) {\n       notFound.classList.remove('not-found-hidden');\n     }\n}\n\nexport function auditArrayNews() {\n  idArrayPars.map(el => {\n    listNews.querySelectorAll('.set').forEach(element => {\n      let id = element.dataset.id;\n\n      if (id === el.id) {\n        element\n          .querySelector('.js-button_favorites')\n          .setAttribute('checked', 'true');\n        element.querySelector('.js-button_favorites').classList.add('add');\n        element.querySelector('.icon').classList.add('add');\n\n        element.querySelector('lable').innerHTML = 'Remove from favorite';\n      }\n    });\n  });\n}\n\nexport function buttonClass() {\n  let but = document.querySelectorAll('.js-button_favorites');\n  let label = document.querySelectorAll('lable');\n\n  but.forEach(el => {\n    el.setAttribute('checked', 'true');\n    el.classList.add('add');\n  });\n  label.forEach(el => {\n    el.innerHTML = 'Remove from favorite';\n  });\n}\nfunction showNothingNotFound(arr) {\n  console.log(arr);\n  notFound.classList.add('not-found-hidden');\n\n  if (!arr.length) {\n    notFound.classList.remove('not-found-hidden');\n  }\n}\n","\n// import {arrayOfReadNews, checkStorageReadNews, getNewsToLocalStorage, makeOpacityReadedNews} from '../read/localStorage.js'\nimport { getStorage,setStorage } from '../local-storage';\n\n  \n    // --------------------------------------------------при нажатии на ссылку в карточке новостей собирает данные с разметки текущей карточки в обьект и записывает в localStorage\nexport const getNewsToLocalStorage = function (e, arr) {\n  const readMoreLinks = document.querySelectorAll('.read');\n  const DateNow = new Date()\n    .toLocaleDateString([], {\n      year: 'numeric',\n      month: 'numeric',\n      day: 'numeric',\n    })\n    .replaceAll('.', '/');\n  readMoreLinks.forEach(link => {\n    if (e.target === link) {\n      const objectRead =\n      {\n        category: link.closest('.set').childNodes[3].childNodes[5].innerText,\n        photo: link.closest('.set').childNodes[3].firstElementChild.src,\n        date: link.closest('.wrapper').firstElementChild.innerText,\n        url: link.href,\n        title: link.closest('.set').childNodes[5].innerText,\n        abstract: link.closest('.set').childNodes[7].innerText,\n        id: link.closest('.set').dataset.id,\n        // readDate: \"18/02/2023\",\n        readDate: DateNow,\n      };\n         for (const item of arr) {\n        if (item.id === objectRead.id) {\n          return;\n           };\n      };\n      const overlay = link.closest('.set').firstElementChild;\n      const radedText = link.closest('.set').childNodes[3].childNodes[3];\n      overlay.classList.remove('noActive-over');\n      overlay.classList.add('active-over');\n      radedText.classList.remove('noActive-rmBtn');\n      radedText.classList.add('active-rmBtn');\n       arr.push(objectRead);\n      setStorage('readNews', arr);\n    } else {\n      return;\n    }\n  });\n}\n// --------------------------------------------------при нажатии на ссылку в карточке новостей собирает данные с разметки текущей карточки в обьект и записывает в localStorage\n\n// ---------------------поставить в .finally каждого фетча, Функция для додавания класса прозрачности просмотренным новостям после рендера разметки\nexport const makeOpacityReadedNews = function (callBack) {\n    callBack()\n  const newsContainer = document.querySelectorAll('.set');\n  const readNews = getStorage('readNews');\n  if (!readNews) {\n    return;\n  }\n  newsContainer.forEach(item => {\n    for (let i = 0; i < readNews.length; i++) {\n      const element = readNews[i];\n      if (item.dataset.id === element.id) {\n        const alredy = item.childNodes[3].childNodes[3];\n        const overlay = item.firstElementChild;\n        overlay.classList.add('active-over');\n        overlay.classList.remove('noActive-over');\n        alredy.classList.remove('noActive-rmBtn');\n        alredy.classList.add('active-rmBtn');\n      }\n    }\n  });\n}\n// ---------------------поставить в .finally каждого фетча, Функция для додавания класса прозрачности просмотренным новостям после рендера разметки","import { Notify } from 'notiflix/build/notiflix-notify-aio';\n\nimport { searchForm, notFound } from '../refs/index';\nimport { getStorage } from '../local-storage/index';\nimport { markUpPage } from '../markup/index';\nimport { auditArrayNews } from '../favorites/index'; //\nimport { makeOpacityReadedNews } from '../read/feature';\nsearchForm.addEventListener('submit', handleSubmitSearchForm);\n\nfunction handleSubmitSearchForm(event) {\n  event.preventDefault();\n\n  const searchingNews = event.target.search.value.trim().toLowerCase();\n\n  if (!searchingNews) {\n    return makeInfoMessage('What would you like to find?');\n  }\n\n  searchFromCurrentPage(searchingNews);\n\n  event.currentTarget.reset();\n}\n\nfunction searchFromCurrentPage(searchingNews) {\n  let storageKey = 'ID-SAVE-FAVORITE';\n\n  const listNews = document.querySelector('.list-news');\n  listNews.innerHTML = '';\n\n  const newsArr = getStorage(storageKey);\n\n  const desiredNews = newsArr.filter(news =>\n    news.title.toLowerCase().includes(searchingNews)\n  );\n\n  showNothingNotFound(desiredNews);\n  appendArticleMarkup(desiredNews, listNews);\n  makeOpacityReadedNews(() => auditArrayNews(listNews));\n}\n\nfunction appendArticleMarkup(desiredNews, container) {\n  const cardSet = desiredNews\n    .map(({ photo, title, abstract, date, url, category, id, idLenght }) =>\n      markUpPage(photo, title, abstract, date, url, category, id, idLenght)\n    )\n    .join('');\n\n  container.innerHTML = cardSet;\n}\n\nfunction showNothingNotFound(arr) {\n  notFound.classList.add('not-found-hidden');\n\n  if (!arr.length) {\n    notFound.classList.remove('not-found-hidden');\n  }\n}\n\nfunction makeInfoMessage(message) {\n  if (window.matchMedia('(max-width: 767px)').matches) {\n    return;\n  }\n  Notify.info(message);\n}\n"],"names":["parcelRequire","$8nrFW","$bpWze","$c90e0420c54a8c0c$export$e1057364ed3a7331","e","arr","readMoreLinks","document","querySelectorAll","DateNow","Date","toLocaleDateString","year","month","day","replaceAll","forEach","link","target","objectRead","category","closest","childNodes","innerText","photo","firstElementChild","src","date","url","href","title","abstract","id","dataset","readDate","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","value","err","return","overlay","radedText","classList","remove","add","push","setStorage","$c90e0420c54a8c0c$export$774f98406edd008a","callBack","newsContainer","readNews","getStorage","item","i","length","element","alredy","$7a5ee36cdaf045b9$var$arrayOfReadNews","$parcel$interopDefault","$7a5ee36cdaf045b9$var$listNews","querySelector","$7a5ee36cdaf045b9$var$LOCALSTORAGE_KEY","$7a5ee36cdaf045b9$var$idArray","localStorage","getItem","$7a5ee36cdaf045b9$var$idArrayPars","JSON","parse","$7a5ee36cdaf045b9$export$c0c869611b1be208","map","el","setAttribute","innerHTML","addEventListener","contains","findIndex","idLenght","attributes","splice","setItem","stringify","parentNode","console","log","$7rHhr","notFound","children","$7a5ee36cdaf045b9$var$deletNewsFavorite","array","param","media","$aDyNI","markUpPage","join","insertAdjacentHTML","$7a5ee36cdaf045b9$var$creatFavoritesList","$h6c0i","searchForm","event","preventDefault","searchingNews","search","trim","toLowerCase","message","window","matchMedia","matches","Notify","info","$a83cc4d96efdeb5e$var$makeInfoMessage","storageKey","listNews","desiredNews","filter","news","includes","container","cardSet","$a83cc4d96efdeb5e$var$appendArticleMarkup","$a83cc4d96efdeb5e$var$searchFromCurrentPage","currentTarget","reset"],"version":3,"file":"favorite.fad368fd.js.map"}